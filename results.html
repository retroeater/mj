<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<title>成績</title>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jq-3.3.1/dt-1.10.20/fh-3.1.6/datatables.min.css" />
<link rel="stylesheet" type="text/css" href="results.css" />
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-3.3.1/dt-1.10.20/fh-3.1.6/datatables.min.js"></script>
<script>
jQuery(function($){
	$.extend( $.fn.dataTable.defaults, { 
		language: { url: "https://cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Japanese.json" } 
    });
	$('#result_summary').DataTable( {
		ajax: "results_summary.json",
		columns: [
			{ data: "year", className: "dt-body-center" },
			{ data: "score", className: "dt-body-right", render: function(data,type,row,meta) { 
					if(row.score >= 0) {
						return '+' + data.toFixed(1)
					} else {
						return '▲' + (Math.abs(data)).toFixed(1)
					}
				}
			},
			{ data: "average_rank", className: "dt-body-center", render: function(data,type,row,meta) {
					return data.toFixed(2)
				}
			},
			{ data: "1st_ratio", className: "dt-body-center", render: function(data,type,row,meta) {
					return data.toFixed(3)
				}
			},
			{ data: "non_4th_ratio", className: "dt-body-center", render: function(data,type,row,meta) {
					return data.toFixed(3)
				}
			},			
			{ data: "number_of_games", className: "dt-body-right" }
		],
		info: false,
		order: [ [ 0, "desc" ] ],
		paging: false,
		searching: false
	} );
	$("#result_details").dataTable( {
		ajax: "results_details.json",
		columns: [
			{ data: "date", className: "dt-body-center" },
			{ data: "game_id", visible: false },
			{ data: "organization", className: "dt-body-left" },
			{ data: "title", className: "dt-body-left" },
			{ data: "game", className: "dt-body-left", render: function(data,type,row,meta) {
					if(row.twitter_url) {
						return data + ' <a href="' + row.twitter_url + '"><img src="Twitter_Logo_Blue.png" class="twitter" height="24" width="24"></a>'
					} else {
						return data
					}
				}
			},
			{ data: "players", className: "dt-body-left" },
			{ data: "ranks", className: "dt-body-left" },
			{ data: "score", className: "dt-body-right", render: function(data,type,row,meta) {
					if(row.score >= 0) {
						return '+' + data.toFixed(1)
					} else {
						return '▲' + (Math.abs(data)).toFixed(1)
					}
				}
			},
			{ data: "result", className: "dt-body-center" }
		],
		fixedHeader: true,
		lengthMenu: [ [20, 50, -1], [20, 50, "全"] ],
		order: [ [ 1, "desc" ] ]
	} ); 
});
</script>
</head>
<body>
<p><a href="index.html">ホーム</a> > 成績</p>
<table id="result_summary" align="left" class="display compact" style="width:50%">
	<thead>
		<tr>
			<th>年</th>
			<th>総得点</th>
			<th>平均着順</th>
			<th>トップ率</th>
			<th>4着回避率</th>
			<th>半荘数</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>
<br />
<table id="result_details" class="display compact" data-page-length="20" style="width:100%">
	<thead>
		<tr>
			<th>日付</th>
			<th>#</th>
			<th>団体</th>
			<th>タイトル</th>
			<th>対局</th>
			<th>対局者（敬称略）</th>
			<th>着順</th>
			<th>得点</th>
			<th>結果</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>
</body>
</html>
